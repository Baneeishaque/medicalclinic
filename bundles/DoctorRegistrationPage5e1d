(function(){var n,r,t,i,u,f={}.hasOwnProperty,e=function(n,t){function r(){this.constructor=n}for(var i in t)f.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};i=function(){function n(){this.options_index=0;this.parsed=[]}return n.prototype.add_node=function(n){return"OPTGROUP"===n.nodeName.toUpperCase()?this.add_group(n):this.add_option(n)},n.prototype.add_group=function(n){var i,f,t,e,r,u;for(i=this.parsed.length,this.parsed.push({array_index:i,group:!0,label:this.escapeExpression(n.label),title:n.title?n.title:void 0,children:0,disabled:n.disabled,classes:n.className}),r=n.childNodes,u=[],t=0,e=r.length;e>t;t++)f=r[t],u.push(this.add_option(f,i,n.disabled));return u},n.prototype.add_option=function(n,t,i){if("OPTION"===n.nodeName.toUpperCase())return(""!==n.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:n.value,text:n.text,html:n.innerHTML,title:n.title?n.title:void 0,selected:n.selected,disabled:i===!0?i:n.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:n.className,style:n.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1)},n.prototype.escapeExpression=function(n){var t,i;return null==n||n===!1?"":/[\&\<\>\"\'\`]/.test(n)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,n.replace(i,function(n){return t[n]||"&amp;"})):n},n}();i.select_to_array=function(n){var f,r,t,e,u;for(r=new i,u=n.childNodes,t=0,e=u.length;e>t;t++)f=u[t],r.add_node(f);return r.parsed};r=function(){function n(t,i){this.form_field=t;this.options=null!=i?i:{};n.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return n.prototype.set_default_values=function(){var n=this;return this.click_test_action=function(t){return n.test_active_click(t)},this.activate_action=function(t){return n.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1},n.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||n.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||n.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||n.default_no_result_text},n.prototype.choice_label=function(n){return this.include_group_label_in_selected&&null!=n.group_label?"<b class='group-name'>"+n.group_label+"<\/b>"+n.html:n.html},n.prototype.mouse_enter=function(){return this.mouse_on_container=!0},n.prototype.mouse_leave=function(){return this.mouse_on_container=!1},n.prototype.input_focus=function(){var n=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return n.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},n.prototype.input_blur=function(){var n=this;if(!this.mouse_on_container)return(this.active_field=!1,setTimeout(function(){return n.blur_test()},100))},n.prototype.results_option_build=function(n){var r,t,i,f,u;for(r="",u=this.results_data,i=0,f=u.length;f>i;i++)t=u[i],r+=t.group?this.result_add_group(t):this.result_add_option(t),(null!=n?n.first:void 0)&&(t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(t)));return r},n.prototype.result_add_option=function(n){var t,i;return n.search_match?this.include_option_in_results(n)?(t=[],n.disabled||n.selected&&this.is_multiple||t.push("active-result"),!n.disabled||n.selected&&this.is_multiple||t.push("disabled-result"),n.selected&&t.push("result-selected"),null!=n.group_array_index&&t.push("group-option"),""!==n.classes&&t.push(n.classes),i=document.createElement("li"),i.className=t.join(" "),i.style.cssText=n.style,i.setAttribute("data-option-array-index",n.array_index),i.innerHTML=n.search_text,n.title&&(i.title=n.title),this.outerHTML(i)):"":""},n.prototype.result_add_group=function(n){var i,t;return n.search_match||n.group_match?n.active_options>0?(i=[],i.push("group-result"),n.classes&&i.push(n.classes),t=document.createElement("li"),t.className=i.join(" "),t.innerHTML=n.search_text,n.title&&(t.title=n.title),this.outerHTML(t)):"":""},n.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},n.prototype.reset_single_select_options=function(){var i,n,u,r,t;for(r=this.results_data,t=[],n=0,u=r.length;u>n;n++)i=r[n],i.selected?t.push(i.selected=!1):t.push(void 0);return t},n.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},n.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},n.prototype.winnow_results=function(){var e,n,h,u,t,i,r,o,c,f,l,s;for(this.no_results_clear(),u=0,i=this.get_search_text(),e=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp(e,"i"),h=this.get_search_regex(e),s=this.results_data,f=0,l=s.length;l>f;f++)n=s[f],n.search_match=!1,t=null,this.include_option_in_results(n)&&(n.group&&(n.group_match=!1,n.active_options=0),null!=n.group_array_index&&this.results_data[n.group_array_index]&&(t=this.results_data[n.group_array_index],0===t.active_options&&t.search_match&&(u+=1),t.active_options+=1),n.search_text=n.group?n.label:n.html,(!n.group||this.group_search)&&(n.search_match=this.search_string_match(n.search_text,h),n.search_match&&!n.group&&(u+=1),n.search_match?(i.length&&(r=n.search_text.search(c),o=n.search_text.substr(0,r+i.length)+"<\/em>"+n.search_text.substr(r+i.length),n.search_text=o.substr(0,r)+"<em>"+o.substr(r)),null!=t&&(t.group_match=!0)):null!=n.group_array_index&&this.results_data[n.group_array_index].search_match&&(n.search_match=!0)));return this.result_clear_highlight(),1>u&&i.length?(this.update_results_content(""),this.no_results(i)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},n.prototype.get_search_regex=function(n){var t;return t=this.search_contains?"":"^",new RegExp(t+n,"i")},n.prototype.search_string_match=function(n,t){var u,i,r,f;if(t.test(n))return!0;if(this.enable_split_word_search&&(n.indexOf(" ")>=0||0===n.indexOf("["))&&(i=n.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,f=i.length;f>r;r++)if(u=i[r],t.test(u))return!0},n.prototype.choices_count=function(){var i,n,r,t;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,t=this.form_field.options,n=0,r=t.length;r>n;n++)i=t[n],i.selected&&(this.selected_option_count+=1);return this.selected_option_count},n.prototype.choices_click=function(n){return n.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},n.prototype.keyup_checker=function(n){var t,i;switch(t=null!=(i=n.which)?i:n.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(n.preventDefault(),this.results_showing)return this.result_select(n);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},n.prototype.clipboard_event_checker=function(){var n=this;return setTimeout(function(){return n.results_search()},50)},n.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},n.prototype.include_option_in_results=function(n){return this.is_multiple&&!this.display_selected_options&&n.selected?!1:!this.display_disabled_options&&n.disabled?!1:n.empty?!1:!0},n.prototype.search_results_touchstart=function(n){return this.touch_started=!0,this.search_results_mouseover(n)},n.prototype.search_results_touchmove=function(n){return this.touch_started=!1,this.search_results_mouseout(n)},n.prototype.search_results_touchend=function(n){if(this.touch_started)return this.search_results_mouseup(n)},n.prototype.outerHTML=function(n){var t;return n.outerHTML?n.outerHTML:(t=document.createElement("div"),t.appendChild(n),t.innerHTML)},n.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},n.default_multiple_text="Select Some Options",n.default_single_text="Select an Option",n.default_no_result_text="No results match",n}();n=jQuery;n.fn.extend({chosen:function(i){return r.browser_is_supported()?this.each(function(){var u,r;u=n(this);r=u.data("chosen");"destroy"===i&&r instanceof t?r.destroy():r instanceof t||u.data("chosen",new t(this,i))}):this}});t=function(t){function r(){return u=r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.setup=function(){return this.form_field_jq=n(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},r.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=n("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /><\/li><\/ul><div class="chosen-drop"><ul class="chosen-results"><\/ul><\/div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'<\/span><div><b><\/b><\/div><\/a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /><\/div><ul class="chosen-results"><\/ul><\/div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},r.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},r.prototype.register_observers=function(){var n=this;return this.container.bind("touchstart.chosen",function(t){return n.container_mousedown(t),t.preventDefault()}),this.container.bind("touchend.chosen",function(t){return n.container_mouseup(t),t.preventDefault()}),this.container.bind("mousedown.chosen",function(t){n.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){n.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){n.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){n.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){n.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){n.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){n.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){n.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){n.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){n.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){n.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){n.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){n.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){n.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){n.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){n.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){n.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){n.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){n.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){n.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){n.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){n.choices_click(t)}):this.container.bind("click.chosen",function(n){n.preventDefault()})},r.prototype.destroy=function(){return n(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},r.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},r.prototype.container_mousedown=function(t){if(!this.is_disabled&&(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null==t||!n(t.target).hasClass("search-choice-close")))return(this.active_field?this.is_multiple||!t||n(t.target)[0]!==this.selected_item[0]&&!n(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),n(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},r.prototype.container_mouseup=function(n){if("ABBR"===n.target.nodeName&&!this.is_disabled)return this.results_reset(n)},r.prototype.search_results_mousewheel=function(n){var t;return n.originalEvent&&(t=n.originalEvent.deltaY||-n.originalEvent.wheelDelta||n.originalEvent.detail),null!=t?(n.preventDefault(),"DOMMouseScroll"===n.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},r.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},r.prototype.close_field=function(){return n(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},r.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},r.prototype.test_active_click=function(t){var i;return i=n(t.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},r.prototype.result_do_highlight=function(n){var t,i,r,f,u;if(n.length){if(this.result_clear_highlight(),this.result_highlight=n,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),u=this.search_results.scrollTop(),f=r+u,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=f)return this.search_results.scrollTop(t-r>0?t-r:0);if(u>i)return this.search_results.scrollTop(i)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},r.prototype.update_results_content=function(n){return this.search_results.html(n)},r.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},r.prototype.set_tab_index=function(){var n;if(this.form_field.tabIndex)return(n=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=n)},r.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=n("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(n){return t.is_multiple?t.container_mousedown(n):t.activate_field()}):void 0},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},r.prototype.search_results_mouseup=function(t){var i;return i=n(t.target).hasClass("active-result")?n(t.target):n(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},r.prototype.search_results_mouseover=function(t){var i;return i=n(t.target).hasClass("active-result")?n(t.target):n(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},r.prototype.search_results_mouseout=function(t){if(n(t.target).hasClass("active-result"))return this.result_clear_highlight()},r.prototype.choice_build=function(t){var i,r,u=this;return i=n("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(t)+"<\/span>"),t.disabled?i.addClass("search-choice-disabled"):(r=n("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(n){return u.choice_destroy_link_click(n)}),i.append(r)),this.search_container.before(i)},r.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(n(t.target))},r.prototype.choice_destroy=function(n){if(this.result_deselect(n[0].getAttribute("data-option-array-index")))return(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),n.parents("li").first().remove(),this.search_field_scale())},r.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},r.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},r.prototype.result_select=function(n){var i,t;if(this.result_highlight)return(i=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?i.removeClass("active-result"):this.reset_single_select_options(),i.addClass("result-selected"),t=this.results_data[i[0].getAttribute("data-option-array-index")],t.selected=!0,this.form_field.options[t.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(t):this.single_set_selected_text(this.choice_label(t)),(n.metaKey||n.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[t.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,n.preventDefault(),this.search_field_scale()))},r.prototype.single_set_selected_text=function(n){return null==n&&(n=this.default_text),n===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(n)},r.prototype.result_deselect=function(n){var t;return t=this.results_data[n],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},r.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"><\/abbr>'),this.selected_item.addClass("chosen-single-with-deselect"))},r.prototype.get_search_text=function(){return n("<div/>").text(n.trim(this.search_field.val())).html()},r.prototype.winnow_results_set_highlight=function(){var n,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),n=t.length?t.first():this.search_results.find(".active-result").first(),null!=n?this.result_do_highlight(n):void 0},r.prototype.no_results=function(t){var i;return i=n('<li class="no-results">'+this.results_none_found+' "<span><\/span>"<\/li>'),i.find("span").first().html(t),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var n;return this.results_showing&&this.result_highlight?(n=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(n):void 0:this.results_show()},r.prototype.keyup_arrow=function(){var n;return this.results_showing||this.is_multiple?this.result_highlight?(n=this.result_highlight.prevAll("li.active-result"),n.length?this.result_do_highlight(n.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},r.prototype.keydown_backstroke=function(){var n;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(n=this.search_container.siblings("li.search-choice").last(),n.length&&!n.hasClass("search-choice-disabled")?(this.pending_backstroke=n,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.keydown_checker=function(n){var t,i;switch(t=null!=(i=n.which)?i:n.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(n);this.mouse_on_container=!1;break;case 13:this.results_showing&&n.preventDefault();break;case 32:this.disable_search&&n.preventDefault();break;case 38:n.preventDefault();this.keyup_arrow();break;case 40:n.preventDefault();this.keydown_arrow()}},r.prototype.search_field_scale=function(){var t,u,h,f,e,o,i,r,s;if(this.is_multiple){for(h=0,i=0,e="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],r=0,s=o.length;s>r;r++)f=o[r],e+=f+":"+this.search_field.css(f)+";";return t=n("<div />",{style:e}),t.text(this.search_field.val()),n("body").append(t),i=t.width()+25,t.remove(),u=this.container.outerWidth(),i>u-10&&(i=u-10),this.search_field.css({width:i+"px"})}},r}(r)}).call(this),function(n){"use strict";var t={i18n:{ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So.","Mo","Di","Mi","Do","Fr","Sa."]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",step:60,closeOnDateSelect:0,closeOnWithoutClick:!0,timepicker:!0,datepicker:!0,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,mask:!1,validateOnBlur:!0,allowBlank:!1,yearStart:1950,yearEnd:2050,style:"",id:"",roundTime:"round",className:"",weekends:[],yearOffset:0};Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){for(var i=t||0,r=this.length;i<r;i++)if(this[i]===n)return i;return-1});n.fn.xdsoftScroller=function(t){return this.each(function(){var i=n(this);if(!n(this).hasClass("xdsoft_scroller_box")){var c=function(n){var t={x:0,y:0},i;return n.type=="touchstart"||n.type=="touchmove"||n.type=="touchend"||n.type=="touchcancel"?(i=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0],t.x=i.pageX,t.y=i.pageY):(n.type=="mousedown"||n.type=="mouseup"||n.type=="mousemove"||n.type=="mouseover"||n.type=="mouseout"||n.type=="mouseenter"||n.type=="mouseleave")&&(t.x=n.pageX,t.y=n.pageY),t},l=0,f=i.children().eq(0),u=i[0].clientHeight,e=f[0].offsetHeight,o=n('<div class="xdsoft_scrollbar"><\/div>'),r=n('<div class="xdsoft_scroller"><\/div>'),s=100,h=!1;o.append(r);i.addClass("xdsoft_scroller_box").append(o);r.on("mousedown.xdsoft_scroller",function(f){u||i.trigger("resize_scroll.xdsoft_scroller",[t]);var h=f.pageY,c=parseInt(r.css("margin-top")),e=o[0].offsetHeight;n(document.body).addClass("xdsoft_noselect");n([document.body,window]).on("mouseup.xdsoft_scroller",function a(){n([document.body,window]).off("mouseup.xdsoft_scroller",a).off("mousemove.xdsoft_scroller",l).removeClass("xdsoft_noselect")});n(document.body).on("mousemove.xdsoft_scroller",l=function(n){var t=n.pageY-h+c;t<0&&(t=0);t+r[0].offsetHeight>e&&(t=e-r[0].offsetHeight);i.trigger("scroll_element.xdsoft_scroller",[s?t/s:0])})});i.on("scroll_element.xdsoft_scroller",function(n,t){u||i.trigger("resize_scroll.xdsoft_scroller",[t,!0]);t=t>1?1:t<0||isNaN(t)?0:t;r.css("margin-top",s*t);f.css("marginTop",-parseInt((e-u)*t))}).on("resize_scroll.xdsoft_scroller",function(n,t,h){u=i[0].clientHeight;e=f[0].offsetHeight;var c=u/e,l=c*o[0].offsetHeight;c>1?r.hide():(r.show(),r.css("height",parseInt(l>10?l:10)),s=o[0].offsetHeight-r[0].offsetHeight,h!==!0&&i.trigger("scroll_element.xdsoft_scroller",[t?t:Math.abs(parseInt(f.css("marginTop")))/(e-u)]))});i.mousewheel&&i.mousewheel(function(n,t){var r=Math.abs(parseInt(f.css("marginTop")));return i.trigger("scroll_element.xdsoft_scroller",[(r-t*20)/(e-u)]),n.stopPropagation(),!1});i.on("touchstart",function(n){h=c(n)});i.on("touchmove",function(n){if(h){var t=c(n),r=Math.abs(parseInt(f.css("marginTop")));i.trigger("scroll_element.xdsoft_scroller",[(r-(t.y-h.y))/(e-u)]);n.stopPropagation();n.preventDefault()}});i.on("touchend touchcancel",function(){h=!1})}i.trigger("resize_scroll.xdsoft_scroller",[t])})};n.fn.datetimepicker=function(i){var s=48,v=57,h=96,c=105,e=17,u=46,l=13,y=27,f=8,p=37,w=38,b=39,k=40,a=9,d=116,g=65,nt=67,tt=86,it=90,rt=89,o=!1,r=n.isPlainObject(i)||!i?n.extend({},t,i):n.extend({},t),ut=function(t){var i=n("<div "+(r.id?'id="'+r.id+'"':"")+" "+(r.style?'style="'+r.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+r.className+'"><\/div>'),dt=n('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net<\/a><\/div>'),ct=n('<div class="xdsoft_datepicker active"><\/div>'),et=n('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"><\/button><button type="button" class="xdsoft_today_button"><\/button><div class="xdsoft_label xdsoft_month"><span><\/span><\/div><div class="xdsoft_label xdsoft_year"><span><\/span><\/div><button type="button" class="xdsoft_next"><\/button><\/div>'),pt=n('<div class="xdsoft_calendar"><\/div>'),lt=n('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"><\/button><div class="xdsoft_time_box"><\/div><button type="button" class="xdsoft_next"><\/button><\/div>'),ot=lt.find(".xdsoft_time_box").eq(0),ft=n('<div class="xdsoft_time_variant"><\/div>'),gt=n('<div class="xdsoft_scrollbar"><\/div>'),ti=n('<div class="xdsoft_scroller"><\/div>'),wt=n('<div class="xdsoft_select xdsoft_monthselect"><div><\/div><\/div>'),bt=n('<div class="xdsoft_select xdsoft_yearselect"><div><\/div><\/div>'),at,ut,vt,st,yt,kt,ni,ht;et.find(".xdsoft_month span").after(wt);et.find(".xdsoft_year span").after(bt);et.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){var r,u;et.find(".xdsoft_select").hide();var i=n(this).find(".xdsoft_select").eq(0),f=0,e=0;for(ut.currentTime&&(f=ut.currentTime[n(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),i.show(),r=i.find("div.xdsoft_option"),u=0;u<r.length;u++)if(r.eq(u).data("value")==f)break;else e+=r[0].offsetHeight;return i.xdsoftScroller(e/(i.children()[0].offsetHeight-i[0].clientHeight)),t.stopPropagation(),!1});et.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(n){n.stopPropagation();n.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){ut&&ut.currentTime&&ut.currentTime[n(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](n(this).data("value"));n(this).parent().parent().hide();i.trigger("xchange.xdsoft");r.onChangeMonth&&r.onChangeMonth.call&&r.onChangeMonth.call(i,ut.currentTime,i.data("input"))});i.setOptions=function(ft){var ot,st;if(r=n.extend({},r,ft),(r.open||r.opened)&&!r.inline&&t.trigger("open.xdsoft"),r.inline&&(i.addClass("xdsoft_inline"),t.after(i).hide(),i.trigger("afterOpen.xdsoft")),r.inverseButton&&(r.next="xdsoft_prev",r.prev="xdsoft_next"),!r.datepicker&&r.timepicker&&ct.removeClass("active"),r.datepicker&&!r.timepicker&&lt.removeClass("active"),r.value&&(t&&t.val&&t.val(r.value),ut.setCurrentTime(r.value)),r.dayOfWeekStart=isNaN(r.dayOfWeekStart)||parseInt(r.dayOfWeekStart)<0||parseInt(r.dayOfWeekStart)>6?0:parseInt(r.dayOfWeekStart),r.timepickerScrollbar||gt.hide(),ot=[],r.minDate&&(ot=/^-(.*)$/.exec(r.minDate))&&(ot=Date.parseDate(ot[1],r.formatDate))&&(st=ot.getTime()+-6e4*ot.getTimezoneOffset(),r.minDate=new Date(ut.now().getTime()-st).dateFormat(r.formatDate)),r.maxDate&&(ot=/^\+(.*)$/.exec(r.maxDate))&&(ot=Date.parseDate(ot[1],r.formatDate))&&(st=ot.getTime()+-6e4*ot.getTimezoneOffset(),r.maxDate=new Date(ut.now().getTime()+st).dateFormat(r.formatDate)),et.find(".xdsoft_today_button").css("visibility",r.todayButton?"visible":"hidden"),r.mask){var at=function(n){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(n.setSelectionRange)return n.selectionStart}catch(i){return 0}},vt=function(n,t){var n=typeof n=="string"||n instanceof String?document.getElementById(n):n,i;if(n){if(n.createTextRange)return i=n.createTextRange(),i.collapse(!0),i.moveEnd(t),i.moveStart(t),i.select(),!0;if(n.setSelectionRange)return n.setSelectionRange(t,t),!0}else return!1;return!1},ht=function(n,t){var i=n.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(i).test(t)};t.off("keydown.xdsoft");switch(!0){case r.mask===!0:r.mask=r.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case n.type(r.mask)=="string":ht(r.mask,t.val())||t.val(r.mask.replace(/[0-9]/g,"_"));t.on("keydown.xdsoft",function(i){var et=this.value,ut=i.which,ft,ot;switch(!0){case ut>=s&&ut<=v||ut>=h&&ut<=c||ut==f||ut==u:for(ft=at(this),ot=ut!=f&&ut!=u?String.fromCharCode(h<=ut&&ut<=c?ut-s:ut):"_",(ut==f||ut==u)&&ft&&(ft--,ot="_");/[^0-9_]/.test(r.mask.substr(ft,1))&&ft<r.mask.length&&ft>0;)ft+=ut==f||ut==u?-1:1;if(et=et.substr(0,ft)+ot+et.substr(ft+1),n.trim(et)=="")et=r.mask.replace(/[0-9]/g,"_");else if(ft==r.mask.length)break;for(ft+=ut==f||ut==u?0:1;/[^0-9_]/.test(r.mask.substr(ft,1))&&ft<r.mask.length&&ft>0;)ft+=ut==f||ut==u?-1:1;ht(r.mask,et)?(this.value=et,vt(this,ft)):n.trim(et)==""?this.value=r.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft");break;case!!~[g,nt,tt,it,rt].indexOf(ut)&&o:case!!~[y,w,k,p,b,d,e,a,l].indexOf(ut):return!0}return i.preventDefault(),!1})}}if(r.validateOnBlur)t.off("blur.xdsoft").on("blur.xdsoft",function(){r.allowBlank&&!n.trim(n(this).val()).length?(n(this).val(null),i.data("xdsoft_datetime").empty()):Date.parseDate(n(this).val(),r.format)?i.data("xdsoft_datetime").setCurrentTime(n(this).val()):(n(this).val(ut.now().dateFormat(r.format)),i.data("xdsoft_datetime").setCurrentTime(n(this).val()));i.trigger("changedatetime.xdsoft")});r.dayOfWeekStartPrev=r.dayOfWeekStart==0?6:r.dayOfWeekStart-1;i.trigger("xchange.xdsoft")};i.data("options",r).on("mousedown.xdsoft",function(n){return n.stopPropagation(),n.preventDefault(),bt.hide(),wt.hide(),!1});at=lt.find(".xdsoft_time_box");at.append(ft);at.xdsoftScroller();i.on("afterOpen.xdsoft",function(){at.xdsoftScroller()});i.append(ct).append(lt);r.withoutCopyright!==!0&&i.append(dt);ct.append(et).append(pt);n("body").append(i);ut=new function(){var n=this;n.now=function(){var n=new Date;return r.yearOffset&&n.setFullYear(n.getFullYear()+r.yearOffset),n};n.currentTime=this.now();n.isValidDate=function(n){return Object.prototype.toString.call(n)!=="[object Date]"?!1:!isNaN(n.getTime())};n.setCurrentTime=function(t){n.currentTime=typeof t=="string"?n.strtodatetime(t):n.isValidDate(t)?t:n.now();i.trigger("xchange.xdsoft")};n.empty=function(){n.currentTime=null};n.getCurrentTime=function(){return n.currentTime};n.nextMonth=function(){var t=n.currentTime.getMonth()+1;return t==12&&(n.currentTime.setFullYear(n.currentTime.getFullYear()+1),t=0),n.currentTime.setMonth(t),r.onChangeMonth&&r.onChangeMonth.call&&r.onChangeMonth.call(i,ut.currentTime,i.data("input")),i.trigger("xchange.xdsoft"),t};n.prevMonth=function(){var t=n.currentTime.getMonth()-1;return t==-1&&(n.currentTime.setFullYear(n.currentTime.getFullYear()-1),t=11),n.currentTime.setMonth(t),r.onChangeMonth&&r.onChangeMonth.call&&r.onChangeMonth.call(i,ut.currentTime,i.data("input")),i.trigger("xchange.xdsoft"),t};n.strtodatetime=function(t){var i=t?Date.parseDate(t,r.format):n.now();return n.isValidDate(i)||(i=n.now()),i};n.strtodate=function(t){var i=t?Date.parseDate(t,r.formatDate):n.now();return n.isValidDate(i)||(i=n.now()),i};n.strtotime=function(t){var i=t?Date.parseDate(t,r.formatTime):n.now();return n.isValidDate(i)||(i=n.now()),i};n.str=function(){return n.currentTime.dateFormat(r.format)}};et.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){i.data("changed",!0);ut.setCurrentTime(0);i.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(ut.str());i.trigger("close.xdsoft")});et.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=n(this),i=0,u=!1;(function f(n){var e=ut.currentTime.getMonth();t.hasClass(r.next)?ut.nextMonth():t.hasClass(r.prev)&&ut.prevMonth();u||(i=setTimeout(f,n?n:100))})(500);n([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(i);u=!0;n([document.body,window]).off("mouseup.xdsoft",e)})});lt.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var i=n(this),u=0,f=!1,t=110;(function e(n){var s=ot[0].clientHeight,h=ft[0].offsetHeight,o=Math.abs(parseInt(ft.css("marginTop")));i.hasClass(r.next)&&h-s-r.timeHeightInTimePicker>=o?ft.css("marginTop","-"+(o+r.timeHeightInTimePicker)+"px"):i.hasClass(r.prev)&&o-r.timeHeightInTimePicker>=0&&ft.css("marginTop","-"+(o-r.timeHeightInTimePicker)+"px");ot.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(ft.css("marginTop"))/(h-s))]);t=t>10?10:t-10;f||(u=setTimeout(e,n?n:t))})(500);n([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(u);f=!0;n([document.body,window]).off("mouseup.xdsoft",o)})});i.on("xchange.xdsoft",function(t){for(var s="",f=new Date(ut.currentTime.getFullYear(),ut.currentTime.getMonth(),1),u=0,p=ut.now(),h,c,v,w,l,e,o,a;f.getDay()!=r.dayOfWeekStart;)f.setDate(f.getDate()-1);for(s+="<table><thead><tr>",o=0;o<7;o++)s+="<th>"+r.i18n[r.lang].dayOfWeek[o+r.dayOfWeekStart>6?0:o+r.dayOfWeekStart]+"<\/th>";for(s+="<\/tr><\/thead>",s+="<tbody><tr>",h=!1,c=!1,r.maxDate!==!1&&(h=ut.strtodate(r.maxDate),h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),23,59,59,999)),r.minDate!==!1&&(c=ut.strtodate(r.minDate),c=new Date(c.getFullYear(),c.getMonth(),c.getDate())),e=[];u<ut.currentTime.getDaysInMonth()||f.getDay()!=r.dayOfWeekStart||ut.currentTime.getMonth()==f.getMonth();)e=[],u++,v=f.getDate(),w=f.getFullYear(),l=f.getMonth(),e.push("xdsoft_date"),(h!==!1&&f>h||c!==!1&&f<c)&&e.push("xdsoft_disabled"),ut.currentTime.getMonth()!=l&&e.push("xdsoft_other_month"),(r.defaultSelect||i.data("changed"))&&ut.currentTime.dateFormat("d.m.Y")==f.dateFormat("d.m.Y")&&e.push("xdsoft_current"),p.dateFormat("d.m.Y")==f.dateFormat("d.m.Y")&&e.push("xdsoft_today"),(f.getDay()==0||f.getDay()==6||~r.weekends.indexOf(f.dateFormat("d.m.Y")))&&e.push("xdsoft_weekend"),s+='<td data-date="'+v+'" data-month="'+l+'" data-year="'+w+'" class="xdsoft_date xdsoft_day_of_week'+f.getDay()+" "+e.join(" ")+'"><div>'+v+"<\/div><\/td>",f.getDay()==r.dayOfWeekStartPrev&&(s+="<\/tr>"),f.setDate(v+1);s+="<\/tbody><\/table>";pt.html(s);et.find(".xdsoft_label span").eq(0).text(r.i18n[r.lang].months[ut.currentTime.getMonth()]);et.find(".xdsoft_label span").eq(1).text(ut.currentTime.getFullYear());var b="",y="",l="",k=function(n,t){var u=ut.now();u.setHours(n);n=parseInt(u.getHours());u.setMinutes(t);t=parseInt(u.getMinutes());e=[];(r.maxTime!==!1&&ut.strtotime(r.maxTime).getTime()<u.getTime()||r.minTime!==!1&&ut.strtotime(r.minTime).getTime()>u.getTime())&&e.push("xdsoft_disabled");(r.defaultSelect||i.data("changed"))&&parseInt(ut.currentTime.getHours())==parseInt(n)&&(r.step>59||Math[r.roundTime](ut.currentTime.getMinutes()/r.step)*r.step==parseInt(t))&&e.push("xdsoft_current");parseInt(p.getHours())==parseInt(n)&&parseInt(p.getMinutes())==parseInt(t)&&e.push("xdsoft_today");b+='<div class="xdsoft_time '+e.join(" ")+'" data-hour="'+n+'" data-minute="'+t+'">'+u.dateFormat(r.formatTime)+"<\/div>"};if(r.allowTimes&&n.isArray(r.allowTimes)&&r.allowTimes.length)for(u=0;u<r.allowTimes.length;u++)y=ut.strtotime(r.allowTimes[u]).getHours(),l=ut.strtotime(r.allowTimes[u]).getMinutes(),k(y,l);else for(u=0,o=0;u<(r.hours12?12:24);u++)for(o=0;o<60;o+=r.step)y=(u<10?"0":"")+u,l=(o<10?"0":"")+o,k(y,l);for(ft.html(b),a="",u=0,u=parseInt(r.yearStart,10)+r.yearOffset;u<=parseInt(r.yearEnd,10)+r.yearOffset;u++)a+='<div class="xdsoft_option '+(ut.currentTime.getFullYear()==u?"xdsoft_current":"")+'" data-value="'+u+'">'+u+"<\/div>";for(bt.children().eq(0).html(a),u=0,a="";u<=11;u++)a+='<div class="xdsoft_option '+(ut.currentTime.getMonth()==u?"xdsoft_current":"")+'" data-value="'+u+'">'+r.i18n[r.lang].months[u]+"<\/div>";wt.children().eq(0).html(a);n(this).trigger("generate.xdsoft");t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(r.timepicker&&ft.find(".xdsoft_current").length){var t=ot[0].clientHeight,i=ft[0].offsetHeight,n=ft.find(".xdsoft_current").index()*r.timeHeightInTimePicker+1;i-t<n&&(n=i-t);ft.css("marginTop","-"+parseInt(n)+"px");ot.trigger("scroll_element.xdsoft_scroller",[parseInt(n)/(i-t)])}});vt=0;pt.on("click.xdsoft","td",function(){vt++;var u=n(this),f=ut.currentTime;if(u.hasClass("xdsoft_disabled"))return!1;f.setFullYear(u.data("year"));f.setMonth(u.data("month"));f.setDate(u.data("date"));i.trigger("select.xdsoft",[f]);t.val(ut.str());(vt>1||r.closeOnDateSelect===!0||r.closeOnDateSelect===0&&!r.timepicker)&&!r.inline&&i.trigger("close.xdsoft");r.onSelectDate&&r.onSelectDate.call&&r.onSelectDate.call(i,ut.currentTime,i.data("input"));i.data("changed",!0);i.trigger("xchange.xdsoft");i.trigger("changedatetime.xdsoft");setTimeout(function(){vt=0},200)});ft.on("click.xdsoft","div",function(){var t=n(this),u=ut.currentTime;if(t.hasClass("xdsoft_disabled"))return!1;u.setHours(t.data("hour"));u.setMinutes(t.data("minute"));i.trigger("select.xdsoft",[u]);i.data("input").val(ut.str());r.inline||i.trigger("close.xdsoft");r.onSelectTime&&r.onSelectTime.call&&r.onSelectTime.call(i,ut.currentTime,i.data("input"));i.data("changed",!0);i.trigger("xchange.xdsoft");i.trigger("changedatetime.xdsoft")});i.mousewheel&&ct.mousewheel(function(n,t){return r.scrollMonth?(t<0?ut.nextMonth():ut.prevMonth(),!1):!0});i.mousewheel&&ot.unmousewheel().mousewheel(function(n,t){if(!r.scrollTime)return!0;var f=ot[0].clientHeight,e=ft[0].offsetHeight,i=Math.abs(parseInt(ft.css("marginTop"))),u=!0;return t<0&&e-f-r.timeHeightInTimePicker>=i?(ft.css("marginTop","-"+(i+r.timeHeightInTimePicker)+"px"),u=!1):t>0&&i-r.timeHeightInTimePicker>=0&&(ft.css("marginTop","-"+(i-r.timeHeightInTimePicker)+"px"),u=!1),ot.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(ft.css("marginTop"))/(e-f))]),n.stopPropagation(),u});i.on("changedatetime.xdsoft",function(){r.onChangeDateTime&&r.onChangeDateTime.call&&r.onChangeDateTime.call(i,ut.currentTime,i.data("input"))}).on("generate.xdsoft",function(){r.onGenerate&&r.onGenerate.call&&r.onGenerate.call(i,ut.currentTime,i.data("input"))});st=0;t.mousewheel&&t.mousewheel(function(n,u,f,e){return r.scrollInput?!r.datepicker&&r.timepicker?(st=ft.find(".xdsoft_current").length?ft.find(".xdsoft_current").eq(0).index():0,st+u>=0&&st+u<ft.children().length&&(st+=u),ft.children().eq(st).length&&ft.children().eq(st).trigger("mousedown"),!1):r.datepicker&&!r.timepicker?(ct.trigger(n,[u,f,e]),t.val&&t.val(ut.str()),i.trigger("changedatetime.xdsoft"),!1):void 0:!0});yt=function(){var t=i.data("input").offset(),r=t.top+i.data("input")[0].offsetHeight-1,u=t.left;r+i[0].offsetHeight>n(window).height()&&(r=t.top-i[0].offsetHeight+1);u+i[0].offsetWidth>n(window).width()&&(u=t.left-i[0].offsetWidth+i.data("input")[0].offsetWidth);i.css({left:u,top:r})};i.on("open.xdsoft",function(){var t=!0;if(r.onShow&&r.onShow.call&&(t=r.onShow.call(i,ut.currentTime,i.data("input"))),t!==!1){i.show();i.trigger("afterOpen.xdsoft");yt();n(window).off("resize.xdsoft",yt).on("resize.xdsoft",yt);if(r.closeOnWithoutClick)n([document.body,window]).on("mousedown.xdsoft",function u(){i.trigger("close.xdsoft");n([document.body,window]).off("mousedown.xdsoft",u)})}}).on("close.xdsoft",function(n){var t=!0;r.onClose&&r.onClose.call&&(t=r.onClose.call(i,ut.currentTime,i.data("input")));t===!1||r.opened||r.inline||i.hide();n.stopPropagation()}).data("input",t);kt=0;ni=0;i.data("xdsoft_datetime",ut);i.setOptions(r);ht=r.value?r.value:t&&t.val&&t.val()?t.val():"";ht&&ut.isValidDate(ht=Date.parseDate(ht,r.format))?i.data("changed",!0):ht="";ut.setCurrentTime(ht?ht:0);i.trigger("afterOpen.xdsoft");t.data("xdsoft_datetimepicker",i).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(clearTimeout(kt),kt=setTimeout(function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(ut.setCurrentTime(t&&t.val&&t.val()?t.val():0),i.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var f=this.value,u=t.which,r;switch(!0){case!!~[l].indexOf(u):return r=n("input:visible,textarea:visible"),i.trigger("close.xdsoft"),r.eq(r.index(this)+1).focus(),!1;case!!~[a].indexOf(u):return i.trigger("close.xdsoft"),!0}})},ft=function(t){var i=t.data("xdsoft_datetimepicker");i&&(i.data("xdsoft_datetime",null),i.remove(),t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),n(window).off("resize.xdsoft"),n([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())};n(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(n){n.keyCode==e&&(o=!0)}).on("keyup.xdsoftctrl",function(n){n.keyCode==e&&(o=!1)});return this.each(function(){var t;if(t=n(this).data("xdsoft_datetimepicker")){if(n.type(i)==="string")switch(i){case"show":n(this).select().focus();t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":ft(n(this));break;case"reset":this.value=this.defaultValue;this.value&&t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,r.format))||t.data("changed",!1);t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(i);return 0}n.type(i)!=="string"&&ut(n(this))})}}(jQuery);Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(n){Date.formatFunctions[n]==null&&Date.createNewFormat(n);var t=Date.formatFunctions[n];return this[t]()};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++,i;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="";for(i=0;i<format.length;++i)ch=format.charAt(i),special||ch!="\\"?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")};Date.getFormatCode=function(n){switch(n){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(n)+"' + "}};Date.parseDate=function(n,t){Date.parseFunctions[t]==null&&Date.createParser(t);var i=Date.parseFunctions[t];return Date[i](n)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1,i;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="";for(i=0;i<format.length;++i)ch=format.charAt(i),special||ch!="\\"?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code)};Date.formatCodeToRegex=function(n,t){switch(n){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(n)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")};Date.prototype.getDayOfYear=function(){var t=0,n;for(Date.daysInMonth[1]=this.isLeapYear()?29:28,n=0;n<this.getMonth();++n)t+=Date.daysInMonth[n];return t+this.getDate()-1};Date.prototype.getWeekOfYear=function(){var t=this.getDayOfYear()+(4-this.getDay()),i=new Date(this.getFullYear(),0,1),n=11-i.getDay();return document.write(n),String.leftPad((t-n)/7+1,2,"0")};Date.prototype.isLeapYear=function(){var n=this.getFullYear();return(n&3)==0&&(n%100||n%400==0&&n)};Date.prototype.getFirstDayOfMonth=function(){var n=(this.getDay()-(this.getDate()-1))%7;return n<0?n+7:n};Date.prototype.getLastDayOfMonth=function(){var n=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return n<0?n+7:n};Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};String.escape=function(n){return n.replace(/('|\\)/g,"\\$1")};String.leftPad=function(n,t,i){var r=new String(n);for(i==null&&(i=" ");r.length<t;)r=i+r;return r};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n:n(jQuery)}(function(n){function f(i){var u=i||window.event,l=[].slice.call(arguments,1),f=0,e=0,o=0,h=0,c=0,s;return i=n.event.fix(u),i.type="mousewheel",u.wheelDelta&&(f=u.wheelDelta),u.detail&&(f=u.detail*-1),u.deltaY&&(o=u.deltaY*-1,f=o),u.deltaX&&(e=u.deltaX,f=e*-1),u.wheelDeltaY!==undefined&&(o=u.wheelDeltaY),u.wheelDeltaX!==undefined&&(e=u.wheelDeltaX*-1),h=Math.abs(f),(!r||h<r)&&(r=h),c=Math.max(Math.abs(o),Math.abs(e)),(!t||c<t)&&(t=c),s=f>0?"floor":"ceil",f=Math[s](f/r),e=Math[s](e/t),o=Math[s](o/t),l.unshift(i,f,e,o),(n.event.dispatch||n.event.handle).apply(this,l)}var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r,t,u;if(n.event.fixHooks)for(u=e.length;u;)n.event.fixHooks[e[--u]]=n.event.mouseHooks;n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=i.length;n;)this.addEventListener(i[--n],f,!1);else this.onmousewheel=f},teardown:function(){if(this.removeEventListener)for(var n=i.length;n;)this.removeEventListener(i[--n],f,!1);else this.onmousewheel=null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})})